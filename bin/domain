# encoding: utf-8
%w(json open-uri).each { |lib| require lib }
abort "Usage: #{File.basename __FILE__} [query]" unless ARGV.first

response = open("http://domai.nr/api/json/search?q=#{ARGV.first}").read

JSON.parse(response)["results"].each do |domain|
  symbol = if domain["availability"] == "available"
    "\e[32m✓\e[0m" # 32 = green
  else
    "\e[31m✗\e[0m" # 31 = red
  end
  puts "#{symbol} #{domain['domain']}"
end
